<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS Day3</title>
</head>

<body>
    <main>
        <h1>JS Day 3</h1>

        <h2># Javascript ES6 Exercise</h2>
        ​
        <h2>### Convert the code below from ES5 to ES6 and answer the question</h2>
        ​
        <pre><h3>1. Define a variable</h3>
    - ES5
    
    var MAX_SIZE = 25 * 1024 * 1024;
    var title = 'Hello World';
    title = 'Hello ES6'
    

    => ES6:
    
    const MAX_SIZE = 25 *1024 * 1024;
    let title = "Hello World";
    title = "Hello ES6";
    

    - Question: Let and Const - What's the Difference?
    => Answer: 
        + const: biến hằng, không thể gán lại giá trị
        + let: có thể được gán giá trị nhưng không thể định nghĩa lại khi vượt ra ngoài phạm vi của hàm

       </pre>
        <hr>
        <pre><h3>2. String Interpolation</h3>
    - ES5
    
    var user = { name: 'David' };
    var card = { amount: 7, product: "Bar", unitprice: 42 };
    var message = "Hello " + user.name + ",\n" +
    "want to buy " + card.amount + " " + card.product + " for\n" +
    "a total of " + (card.amount * card.unitprice) + " bucks?";
    
    
    => ES6:
    
    let user = { name: "David"};
    let card = { amount: 7, product: "Bar", unitprice: 42 };
    let message = `Hello ${user.name}
                   want to buy ${card.amount} ${card.product} for
                   a total of ${card.amount * card.unitprice} buck?`;
    
       </pre>
        <hr>

        <pre><h3>3. Rest Parameter</h3>
    - ES5
    
    function foo(x, y) {
        var a = Array.prototype.slice.call(arguments, 2);
        return (x + y) * a.length;
    };
    foo(1, 2, 'hello', true, 7) === 9;
    

    => ES6:
    
    function foo(x, y, ...params){
        return (x + y) * params.length;
    }
    foo(1, 2, 'hello', true ,7) === 9;
    
        </pre>
        <hr>

        <pre><h3>4. Default Parameter Values</h3>
    - ES5
    
    function sum(x, y, z) {
        if (y === undefined) {
            y = 7;
        }
        if (z === undefined) {
            z = 42;
        }
        return x + y + z;
    };
    

    => ES6:
    
    function sum(x,y=7,z=42){
        return x+y+z;
    }
    console.log(sum(2)); //51
    console.log(sum()); //x is undefined
    
        </pre>
        <hr>

        <pre><h3>5. Arrow Functions</h3>
    - ES5
    
    var evens = [1, 2, 3, 4, 5, 6];
    var odds = evens.map(function (v) { return v + 1; });
    var pairs = evens.map(function (v) { return { even: v, odd: v + 1 }; });
    var nums = evens.map(function (v, i) { return v + i; });
    var fives = [];
    nums.forEach(function (v) {
        if (v % 5 === 0) {
            fives.push(v);
        }
    });
    

    => ES6:
    
    let evens = [1, 2, 3, 4, 5, 6];
    let odds = evens.map(v => { return v + 1; });
    let pairs = evens.map(v => { return { even: v, odd: v + 1 }; });
    let nums = evens.map((v, i) => { return v + i; });
    let fives = [];
    nums.forEach(v => {
        if (v % 5 === 0) {
            fives.push(v);
        }
    });
    
        </pre>
        <hr>

        <pre><h3>6. Classes</h3>
    - ES5
    
    var Shape = function(id, x, y) {
        this.id = id;
        this.move(x, y);
    };
    Shape.prototype.move = function(x, y) {
    this.x = x;
    this.y = y;
    };
    

    => ES6:
    
    let Shape = class {
        constructor(id, x ,y){
            this.id = id;
            this.move(x,y);
        }
        move(x,y){
            this.x = x;
            this.y =y;
        }
    }
    
        </pre>
        <hr>

        <pre><h3>7. Modules</h3>
    - ES5
    
    // lib/utils.js
    Utils = {};
    Utils.sum = function(x, y) { return x + y };
    Utils.pi = 3.141593;
    
    // someApp.js
    var math = Utils;
    console.log("2π = " + math.sum(math.pi, math.pi));
            
    // otherApp.js
    var sum = Utils.sum, pi = Utils.pi;
    console.log('2π = ' + sum(pi, pi));
    

    => ES6:
    
    // lib/utils.js
    Utils = {};
    Utils.sum = function(x, y) { return x + y };
    Utils.pi = 3.141593;
    export default Utils();
    
    // inApps.js
    import Utils from "lib/utils.js"
    console.log('2π = ' = Utils.sum(Utils.pi,Utils.pi))
    
        </pre>
        <hr>

        <pre><h3>8. Promise</h3>
    - ES5
    
    function showMessAfterTimeout(msg, who, timeout, onDone) {
        setTimeout(function () {
            onDone(msg + ' Hi ' + who + '!');
        }, timeout);
    }
    showMessAfterTimeout('', 'Foo', 100, function(msg) {
        showMessAfterTimeout(msg, 'Bar', 200, function(msg) {
            console.log('Finish after 300ms:' + msg);
        });
    });
    

    => ES6:
    
    function showMessAfterTimeout(who, timeout) {
        return new Promise((resolve, reject) => {
            return setTimeout(() => {
                return resolve(`Hi ${who}!`);
            }, timeout);
        });
    }
    showMessAfterTimeout('Foo', 100)
        .then((msg1) => {
            return showMessAfterTimeout('Bar', 200).then((msg) => {
                return msg1 + ' ' + msg;
            });
        })
        .then((msg) => console.log(`Finish after 300ms: ${msg}`));
    
        </pre>
        <hr>

        <pre><h3>9. Loops</h3>
    - Give an example for each method:
        + for…of
        + findIndex()
    
    const array = [1, 2, 3, 4, 5];
    for (let i in array) {
        console.log(i);
    }

    const array1 = ['a', 'b', 'c'];
    for (let element of array1) {
        console.log(element);
    }

    const array2 = [5, 12, 8, 130, 44];
    const isLargeNumber = (element) => element > 13;
    console.log(array2.findIndex(isLargeNumber));
    
        </pre>
        <hr>
    </main>
</body>

</html>